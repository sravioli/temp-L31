
<!doctype html>
<html lang="it" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Raccolta di appunti, file, slides, etc. relativi al corso di Informatica L31, A.A. 2021-22, dell'Università di Bari "Aldo Moro".">
      
      
        <meta name="author" content="Simone Fidanza">
      
      
        <link rel="canonical" href="https://sravioli.github.io/L31/Anno_I/AESO/SO3_gestione_risorse_problemi.html">
      
      
        <link rel="prev" href="SO2_thread_smp_microkernel.html">
      
      
        <link rel="next" href="SO4_gestione_memoria.html">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Gestione delle risorse e problematiche annesse - Appunti di Informatica</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Montserrat";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gestione-delle-risorse-e-problematiche-annesse" class="md-skip">
          Vai al contenuto
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Intestazione">
    <a href="https://sravioli.github.io/L31/" title="Appunti di Informatica" class="md-header__button md-logo" aria-label="Appunti di Informatica" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M9.4 86.6c-12.5-12.5-12.5-32.7 0-45.2s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Appunti di Informatica
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gestione delle risorse e problematiche annesse
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-purple"  aria-label="Passa alla modalità chiara"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Passa alla modalità chiara" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="purple"  aria-label="Passa alla modalità scura"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Passa alla modalità scura" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Condividi" aria-label="Condividi" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Cancella" aria-label="Cancella" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inizializza la ricerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sRavioli/L31" title="Apri repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M216.29 158.39H137C97 147.9 6.51 150.63 6.51 233.18c0 30.09 15 51.23 35 61-25.1 23-37 33.85-37 49.21 0 11 4.47 21.14 17.89 26.81C8.13 383.61 0 393.35 0 411.65c0 32.11 28.05 50.82 101.63 50.82 70.75 0 111.79-26.42 111.79-73.18 0-58.66-45.16-56.5-151.63-63l13.43-21.55c27.27 7.58 118.7 10 118.7-67.89 0-18.7-7.73-31.71-15-41.07l37.41-2.84zm-63.42 241.9c0 32.06-104.89 32.1-104.89 2.43 0-8.14 5.27-15 10.57-21.54 77.71 5.3 94.32 3.37 94.32 19.11zm-50.81-134.58c-52.8 0-50.46-71.16 1.2-71.16 49.54 0 50.82 71.16-1.2 71.16zm133.3 100.51v-32.1c26.75-3.66 27.24-2 27.24-11V203.61c0-8.5-2.05-7.38-27.24-16.26l4.47-32.92H324v168.71c0 6.51.4 7.32 6.51 8.14l20.73 2.84v32.1zm52.45-244.31c-23.17 0-36.59-13.43-36.59-36.61s13.42-35.77 36.59-35.77c23.58 0 37 12.62 37 35.77s-13.42 36.61-37 36.61zM512 350.46c-17.49 8.53-43.1 16.26-66.28 16.26-48.38 0-66.67-19.5-66.67-65.46V194.75c0-5.42 1.05-4.06-31.71-4.06V154.5c35.78-4.07 50-22 54.47-66.27h38.63c0 65.83-1.34 61.81 3.26 61.81H501v40.65h-60.56v97.15c0 6.92-4.92 51.41 60.57 26.84z"/></svg>
  </div>
  <div class="md-source__repository">
    sRavioli/L31
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../index.html" class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="AE1_dati_rappresentazione.html" class="md-tabs__link md-tabs__link--active">
        Anno I
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigazione" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://sravioli.github.io/L31/" title="Appunti di Informatica" class="md-nav__button md-logo" aria-label="Appunti di Informatica" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M9.4 86.6c-12.5-12.5-12.5-32.7 0-45.2s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>

    </a>
    Appunti di Informatica
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sRavioli/L31" title="Apri repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M216.29 158.39H137C97 147.9 6.51 150.63 6.51 233.18c0 30.09 15 51.23 35 61-25.1 23-37 33.85-37 49.21 0 11 4.47 21.14 17.89 26.81C8.13 383.61 0 393.35 0 411.65c0 32.11 28.05 50.82 101.63 50.82 70.75 0 111.79-26.42 111.79-73.18 0-58.66-45.16-56.5-151.63-63l13.43-21.55c27.27 7.58 118.7 10 118.7-67.89 0-18.7-7.73-31.71-15-41.07l37.41-2.84zm-63.42 241.9c0 32.06-104.89 32.1-104.89 2.43 0-8.14 5.27-15 10.57-21.54 77.71 5.3 94.32 3.37 94.32 19.11zm-50.81-134.58c-52.8 0-50.46-71.16 1.2-71.16 49.54 0 50.82 71.16-1.2 71.16zm133.3 100.51v-32.1c26.75-3.66 27.24-2 27.24-11V203.61c0-8.5-2.05-7.38-27.24-16.26l4.47-32.92H324v168.71c0 6.51.4 7.32 6.51 8.14l20.73 2.84v32.1zm52.45-244.31c-23.17 0-36.59-13.43-36.59-36.61s13.42-35.77 36.59-35.77c23.58 0 37 12.62 37 35.77s-13.42 36.61-37 36.61zM512 350.46c-17.49 8.53-43.1 16.26-66.28 16.26-48.38 0-66.67-19.5-66.67-65.46V194.75c0-5.42 1.05-4.06-31.71-4.06V154.5c35.78-4.07 50-22 54.47-66.27h38.63c0 65.83-1.34 61.81 3.26 61.81H501v40.65h-60.56v97.15c0 6.92-4.92 51.41 60.57 26.84z"/></svg>
  </div>
  <div class="md-source__repository">
    sRavioli/L31
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Anno I
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Anno I
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          AESO
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          AESO
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="AE1_dati_rappresentazione.html" class="md-nav__link">
        Tipi di dato e la loro rappresentazione
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="AE4_expr_booleane_karnaugh.html" class="md-nav__link">
        Espressioni logiche booleane e mappe di Karnaugh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="AE5_istruzioni_indirizzamento.html" class="md-nav__link">
        Formati di istruzioni e indirizzamento
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SO1_so_processi_scheduling.html" class="md-nav__link">
        Sistema operativo, gestione dei processi e scheduling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SO2_thread_smp_microkernel.html" class="md-nav__link">
        Thread, SMP e Microkernel
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Gestione delle risorse e problematiche annesse
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="SO3_gestione_risorse_problemi.html" class="md-nav__link md-nav__link--active">
        Gestione delle risorse e problematiche annesse
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Indice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Indice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gestione-delle-risorse" class="md-nav__link">
    Gestione delle risorse
  </a>
  
    <nav class="md-nav" aria-label="Gestione delle risorse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grafo-di-allocazione-delle-risorse" class="md-nav__link">
    Grafo di allocazione delle risorse
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stallo-di-processi" class="md-nav__link">
    Stallo di processi
  </a>
  
    <nav class="md-nav" aria-label="Stallo di processi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strategie-per-affrontare-lo-stallo" class="md-nav__link">
    Strategie per affrontare lo stallo
  </a>
  
    <nav class="md-nav" aria-label="Strategie per affrontare lo stallo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#algoritmo-dello-struzzo" class="md-nav__link">
    Algoritmo dello struzzo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consentirlo-rilevarlo-e-risolverlo" class="md-nav__link">
    Consentirlo, rilevarlo e risolverlo
  </a>
  
    <nav class="md-nav" aria-label="Consentirlo, rilevarlo e risolverlo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rilevarlo" class="md-nav__link">
    Rilevarlo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eliminarlo" class="md-nav__link">
    Eliminarlo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evitarlo-con-politiche-di-allocazione" class="md-nav__link">
    Evitarlo con politiche di allocazione
  </a>
  
    <nav class="md-nav" aria-label="Evitarlo con politiche di allocazione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stato-sicuro-e-insicuro" class="md-nav__link">
    Stato sicuro e insicuro
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#algoritmo-del-banchiere" class="md-nav__link">
    Algoritmo del banchiere
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#impedirlo-rimuovendone-le-condizioni" class="md-nav__link">
    Impedirlo rimuovendone le condizioni
  </a>
  
    <nav class="md-nav" aria-label="Impedirlo rimuovendone le condizioni">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#negare-la-mutua-esclusione" class="md-nav__link">
    Negare la mutua esclusione
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negare-lhold-and-wait" class="md-nav__link">
    Negare l'hold and wait
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negare-lassenza-di-prerilascio" class="md-nav__link">
    Negare l'assenza di prerilascio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negare-lattesa-circolare" class="md-nav__link">
    Negare l'attesa circolare
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concorrenza" class="md-nav__link">
    Concorrenza
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutua-esclusione" class="md-nav__link">
    Mutua esclusione
  </a>
  
    <nav class="md-nav" aria-label="Mutua esclusione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approcci-software" class="md-nav__link">
    Approcci software
  </a>
  
    <nav class="md-nav" aria-label="Approcci software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#algoritmo-di-dekker" class="md-nav__link">
    Algoritmo di Dekker
  </a>
  
    <nav class="md-nav" aria-label="Algoritmo di Dekker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primo-tentativo" class="md-nav__link">
    Primo tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secondo-tentativo" class="md-nav__link">
    Secondo tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terzo-tentativo" class="md-nav__link">
    Terzo tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quarto-tentativo" class="md-nav__link">
    Quarto tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#soluzione-corretta" class="md-nav__link">
    Soluzione corretta
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supporti-hardware" class="md-nav__link">
    Supporti hardware
  </a>
  
    <nav class="md-nav" aria-label="Supporti hardware">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#macchine-monoprocessore" class="md-nav__link">
    Macchine monoprocessore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#soluzioni-su-smp" class="md-nav__link">
    Soluzioni su SMP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supporto-del-sistema-operativo-o-del-linguaggio-di-programmazione" class="md-nav__link">
    Supporto del sistema operativo o del linguaggio di programmazione
  </a>
  
    <nav class="md-nav" aria-label="Supporto del sistema operativo o del linguaggio di programmazione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#semafori" class="md-nav__link">
    Semafori
  </a>
  
    <nav class="md-nav" aria-label="Semafori">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementazione" class="md-nav__link">
    Implementazione
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-e-starvation" class="md-nav__link">
    Deadlock e starvation
  </a>
  
    <nav class="md-nav" aria-label="Deadlock e starvation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#produttore-e-consumatore" class="md-nav__link">
    Produttore e consumatore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor" class="md-nav__link">
    Monitor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SO4_gestione_memoria.html" class="md-nav__link">
        Gestione della memoria centrale
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SO5_file_system.html" class="md-nav__link">
        Il file system
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Laboratorio di Informatica
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Laboratorio di Informatica
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/00_introduzione.html" class="md-nav__link">
        Introduzione
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/01_test_debugging.html" class="md-nav__link">
        Test e Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2_3" id="__nav_2_2_3_label" tabindex="0">
          Goose game
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_3">
          <span class="md-nav__icon md-icon"></span>
          Goose game
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/goose_game/index.html" class="md-nav__link">
        Gioco dell'oca
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/goose_game/CHANGELOG.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2_4" id="__nav_2_2_4_label" tabindex="0">
          Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_4">
          <span class="md-nav__icon md-icon"></span>
          Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/03-02-2023.html" class="md-nav__link">
        Appunti del 02-03-2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/03-08-2023.html" class="md-nav__link">
        Appunti del 08-03-2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/03-09-2023.html" class="md-nav__link">
        Appunti del 09-03-2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/03-16-2023.html" class="md-nav__link">
        Appunti del 16-03-2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/03-23-2023.html" class="md-nav__link">
        Appunti del 23/03/23
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/03-29-2023.html" class="md-nav__link">
        Appunti del 29/03/2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/03-30-2023.html" class="md-nav__link">
        Appunti del 30/03/2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/04-20-2023.html" class="md-nav__link">
        Appunti del 20/04/2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/04-26-2023.html" class="md-nav__link">
        Appunti del 26/04/2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/05-10-23.html" class="md-nav__link">
        Appunti del 10/05/2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Laboratorio_di_Informatica/notes/consegna0.html" class="md-nav__link">
        Correzione della prima consegna
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Linguaggi di Programmazione
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Linguaggi di Programmazione
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Linguaggi_di_Programmazione/00_introduzione.html" class="md-nav__link">
        Linguaggi di Programmazione
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Linguaggi_di_Programmazione/01_intro_linguaggi.html" class="md-nav__link">
        Introduzione ai linguaggi di programmazione
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Linguaggi_di_Programmazione/02_teoria_linguaggi.html" class="md-nav__link">
        Introduzione alla teoria dei linguaggi formali
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Linguaggi_di_Programmazione/03_grammatiche_linguaggi.html" class="md-nav__link">
        Grammatiche e Linguaggi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Linguaggi_di_Programmazione/04_linguaggi_CF_e_non.html" class="md-nav__link">
        Linguaggi liberi da contesto e linguaggi dipendenti da contesto
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Matematica Discreta temp
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Matematica Discreta temp
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
          !miei appunti mat dis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_1">
          <span class="md-nav__icon md-icon"></span>
          !miei appunti mat dis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Matematica_Discreta_temp/%21miei%20appunti%20mat%20dis/INDEX.html" class="md-nav__link">
        INDICE SOMMARIO    <!-- rifarsi a questo per l'indicizzazione degli appunti -->
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          Programmazione
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Programmazione
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/00_intro_calcolatori.html" class="md-nav__link">
        Introduzione ai calcolatori
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/01_problem_solving.html" class="md-nav__link">
        Problem Solving
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/02_algoritmo_euclide.html" class="md-nav__link">
        Algoritmo di Euclide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/03_notazione_lineare.html" class="md-nav__link">
        Notazione Lineare
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/04_algebra_booleana.html" class="md-nav__link">
        Algebra Booleana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/05_dati.html" class="md-nav__link">
        I Dati
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/06_metodologia_TD.html" class="md-nav__link">
        Metodologia Top-Down
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/07_funzioni_procedure.html" class="md-nav__link">
        Funzioni e procedure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/08_tipi_semplici.html" class="md-nav__link">
        Tipi semplici
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/10_array.html" class="md-nav__link">
        Array
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_11" >
      
      
      
        <label class="md-nav__link" for="__nav_2_5_11" id="__nav_2_5_11_label" tabindex="0">
          Exercises
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_11">
          <span class="md-nav__icon md-icon"></span>
          Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/exercises/08.10.21.html" class="md-nav__link">
        Esercizi del 08/10/2021
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/exercises/14.10.21.html" class="md-nav__link">
        Esercizio del 14/10/2021
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/exercises/21.10.21.html" class="md-nav__link">
        Esercizi del 21/10/2021
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Programmazione/exercises/28.10.21.html" class="md-nav__link">
        Esercizio del 28/10/21
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Indice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Indice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gestione-delle-risorse" class="md-nav__link">
    Gestione delle risorse
  </a>
  
    <nav class="md-nav" aria-label="Gestione delle risorse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grafo-di-allocazione-delle-risorse" class="md-nav__link">
    Grafo di allocazione delle risorse
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stallo-di-processi" class="md-nav__link">
    Stallo di processi
  </a>
  
    <nav class="md-nav" aria-label="Stallo di processi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strategie-per-affrontare-lo-stallo" class="md-nav__link">
    Strategie per affrontare lo stallo
  </a>
  
    <nav class="md-nav" aria-label="Strategie per affrontare lo stallo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#algoritmo-dello-struzzo" class="md-nav__link">
    Algoritmo dello struzzo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consentirlo-rilevarlo-e-risolverlo" class="md-nav__link">
    Consentirlo, rilevarlo e risolverlo
  </a>
  
    <nav class="md-nav" aria-label="Consentirlo, rilevarlo e risolverlo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rilevarlo" class="md-nav__link">
    Rilevarlo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eliminarlo" class="md-nav__link">
    Eliminarlo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evitarlo-con-politiche-di-allocazione" class="md-nav__link">
    Evitarlo con politiche di allocazione
  </a>
  
    <nav class="md-nav" aria-label="Evitarlo con politiche di allocazione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stato-sicuro-e-insicuro" class="md-nav__link">
    Stato sicuro e insicuro
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#algoritmo-del-banchiere" class="md-nav__link">
    Algoritmo del banchiere
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#impedirlo-rimuovendone-le-condizioni" class="md-nav__link">
    Impedirlo rimuovendone le condizioni
  </a>
  
    <nav class="md-nav" aria-label="Impedirlo rimuovendone le condizioni">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#negare-la-mutua-esclusione" class="md-nav__link">
    Negare la mutua esclusione
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negare-lhold-and-wait" class="md-nav__link">
    Negare l'hold and wait
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negare-lassenza-di-prerilascio" class="md-nav__link">
    Negare l'assenza di prerilascio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negare-lattesa-circolare" class="md-nav__link">
    Negare l'attesa circolare
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concorrenza" class="md-nav__link">
    Concorrenza
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutua-esclusione" class="md-nav__link">
    Mutua esclusione
  </a>
  
    <nav class="md-nav" aria-label="Mutua esclusione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approcci-software" class="md-nav__link">
    Approcci software
  </a>
  
    <nav class="md-nav" aria-label="Approcci software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#algoritmo-di-dekker" class="md-nav__link">
    Algoritmo di Dekker
  </a>
  
    <nav class="md-nav" aria-label="Algoritmo di Dekker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primo-tentativo" class="md-nav__link">
    Primo tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secondo-tentativo" class="md-nav__link">
    Secondo tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terzo-tentativo" class="md-nav__link">
    Terzo tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quarto-tentativo" class="md-nav__link">
    Quarto tentativo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#soluzione-corretta" class="md-nav__link">
    Soluzione corretta
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supporti-hardware" class="md-nav__link">
    Supporti hardware
  </a>
  
    <nav class="md-nav" aria-label="Supporti hardware">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#macchine-monoprocessore" class="md-nav__link">
    Macchine monoprocessore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#soluzioni-su-smp" class="md-nav__link">
    Soluzioni su SMP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supporto-del-sistema-operativo-o-del-linguaggio-di-programmazione" class="md-nav__link">
    Supporto del sistema operativo o del linguaggio di programmazione
  </a>
  
    <nav class="md-nav" aria-label="Supporto del sistema operativo o del linguaggio di programmazione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#semafori" class="md-nav__link">
    Semafori
  </a>
  
    <nav class="md-nav" aria-label="Semafori">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementazione" class="md-nav__link">
    Implementazione
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-e-starvation" class="md-nav__link">
    Deadlock e starvation
  </a>
  
    <nav class="md-nav" aria-label="Deadlock e starvation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#produttore-e-consumatore" class="md-nav__link">
    Produttore e consumatore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor" class="md-nav__link">
    Monitor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/sRavioli/L31/edit/main/docs/Anno_I/AESO/SO3_gestione_risorse_problemi.md" title="Modifica" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/sRavioli/L31/raw/main/docs/Anno_I/AESO/SO3_gestione_risorse_problemi.md" title="Vedi il sorgente di questa pagina" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="gestione-delle-risorse-e-problematiche-annesse">Gestione delle risorse e problematiche annesse<a class="headerlink" href="#gestione-delle-risorse-e-problematiche-annesse" title="Link permanente">⚓︎</a></h1>
<h2 id="gestione-delle-risorse">Gestione delle risorse<a class="headerlink" href="#gestione-delle-risorse" title="Link permanente">⚓︎</a></h2>
<p>I processi utilizzano delle risorse (es. bus, CPU, stampanti, etc). Tali risorse
sono gestite dal sistema operativo, che le governa e le amministra. Il sistema
operativo decide in merito all'assegnazione delle risorse ai processi, disponendo
l'ordine di accesso dei processi a queste e le modalità di accesso</p>
<p>I processi utilizzano le risorse per tramite del sistema operativo, che trasmette
le operazioni agli strati sottostanti per conto dei processi. La gestione delle
risorse può portare a diverse problematiche, le quali devono essere accuratamente
attenzionate. Tali problematiche sono legate alla concorrenza e alla mutua
esclusione delle risorse. Una risorsa singola può generalmente essere assegnata
a un solo processo alla volta (mutua esclusione).</p>
<h3 id="grafo-di-allocazione-delle-risorse">Grafo di allocazione delle risorse<a class="headerlink" href="#grafo-di-allocazione-delle-risorse" title="Link permanente">⚓︎</a></h3>
<p>Un grafo di allocazione delle risorse è un grafo che rappresenta in che modo le
risorse sono assegnate ai processi e le richieste dei processi.</p>
<!-- markdownlint-disable MD033 -->
<figure>
<pre class="mermaid"><code>stateDiagram-v2
  direction LR
  P1: P₁
  Ra: Rₐ
  P1 --&gt; Ra: requests</code></pre>
<figcaption>La risorsa viene richiesta</figcaption>
</figure>
<figure>
<pre class="mermaid"><code>stateDiagram-v2
  direction LR
  P1: P₁
  Ra: Rₐ
  Ra --&gt; P1: Held by</code></pre>
<figcaption>La risorsa viene tenuta</figcaption>
</figure>
<!-- markdownlint-enable MD033 -->

<h2 id="stallo-di-processi">Stallo di processi<a class="headerlink" href="#stallo-di-processi" title="Link permanente">⚓︎</a></h2>
<p>Lo <strong>stallo di processi</strong> (<em>deadlock</em>) è una delle condizioni problematiche che
possono verificarsi nell'ambito della gestione delle risorse.</p>
<div class="admonition def">
<p class="admonition-title">Deadlock</p>
<p>Un insieme di processi è detto "in stallo" se ciascun processo nell'insieme
è in attesa di un evento che solo un altro processo nello stesso insieme
può generare.</p>
</div>
<p>Generalmente l'evento è il rilascio di una risorsa detenuta da uno dei processi.</p>
<p>Negli scacchi, lo stallo è la condizione in cui il Re non può effettuare mosse
legittime pur non essendo sotto scacco.</p>
<p>Lo stallo comporta che, essendo tutti i processi in attesa di un evento, sono
nello stato di <em>Blocked</em>. Tale situazione comporta che nessuno dei processi in
stallo può:</p>
<ul>
<li>passare in esecuzione, poiché necessita del verificarsi dell'evento;</li>
<li>rilasciare risorse, in quanto non può passare in esecuzione.</li>
</ul>
<p>Nessuno dei processi in stallo può quindi passare in <em>Running</em>, pertanto nessuno
dei processi in stallo può essere riattivato. I processi in stallo sono quindi
congelati nella situazione di stallo a meno di un intervento da parte del
sistema operativo o dell'amministratore.</p>
<pre class="mermaid"><code>flowchart LR
  P1["P₁"] --&gt;|Requests| Ra["R₁"]
  Ra --&gt;|Held by| P2["P₂"]
  P2 --&gt;|Requests| Rb["R₂"]
  Rb --&gt;|Held by| P1</code></pre>
<p>Lo stallo di processi per verificarsi necessità della congiunzione di quattro
condizioni:</p>
<ol>
<li>mutua esclusione (oppure risorse seriali): un solo processo alla volta può
   utilizzare una risorsa;</li>
<li>hold &amp; wait (oppure possesso e attesa): un processo può mantenere il
   possesso delle risorse allocate mentre attende di averne altre;</li>
<li>assenza di prerilascio (oppure assenza di prelazione o risorse non
   prerilasciabili): i processi non possono essere forzati a rilasciare in
   anticipo le risorse acquisite;</li>
<li><strong>attesa circolare</strong>: un processo aspetta una risorsa occupata da un altro
   processo in attesa circolare</li>
</ol>
<p>Le prime tre condizioni sono necessarie ma non sufficienti, aggiungendovi
l'attesa circolare, diventano necessarie e sufficienti.
Inoltre, le prime tre derivano direttamente dalla progettazione e sono in molti
casi auspicabili, l'attesa circolare invece è un evento che si può verificare e
che dipende dalla particolare sequenza di richieste e rilasci.</p>
<h3 id="strategie-per-affrontare-lo-stallo">Strategie per affrontare lo stallo<a class="headerlink" href="#strategie-per-affrontare-lo-stallo" title="Link permanente">⚓︎</a></h3>
<p>Sono possibili quattro diverse strategie per affrontare il problema dello
stallo di processi:</p>
<ol>
<li>ignorare il problema (algoritmo dello struzzo);</li>
<li>consentire il verificarsi dello stallo, rilevarlo e risolverlo;</li>
<li>evitarlo con politiche di allocazione: le tre condizioni necessarie sono
   permesse, un algoritmo verifica dinamicamente che una richiesta non produca
   una situazione di stallo;</li>
<li>impedirlo rimuovendone le condizioni: progettare un sistema operativo in modo
   che la possibilità di avere uno stallo sia esclusa a priori tramite la
   negazione di una delle quattro condizioni.</li>
</ol>
<h4 id="algoritmo-dello-struzzo">Algoritmo dello struzzo<a class="headerlink" href="#algoritmo-dello-struzzo" title="Link permanente">⚓︎</a></h4>
<p>L'algoritmo dello struzzo pretende che il problema non esista. È una soluzione
ragionevole se:</p>
<ul>
<li>lo stallo capita di rado</li>
<li>il costo per evitare lo stallo è troppo elevato</li>
</ul>
<p>Si ha quindi un compromesso tra convenienza e correttezza. Windows e UNIX
utilizzano principalmente questo approccio.</p>
<h4 id="consentirlo-rilevarlo-e-risolverlo">Consentirlo, rilevarlo e risolverlo<a class="headerlink" href="#consentirlo-rilevarlo-e-risolverlo" title="Link permanente">⚓︎</a></h4>
<p>La seconda strategia possibile è quella di consentire il verificarsi dello
stallo, rilevarlo e risolverlo. Tale strategia prevede quindi di operare
normalmente e verificare periodicamente se si è verificato uno stallo.</p>
<p>È possibile dividerla in due fasi:</p>
<ol>
<li>rilevare lo stallo;</li>
<li>eliminare la situazione di stallo.</li>
</ol>
<h5 id="rilevarlo">Rilevarlo<a class="headerlink" href="#rilevarlo" title="Link permanente">⚓︎</a></h5>
<p>Avendo a disposizione una sola risorsa di ogni tipo si può rilevare lo stallo
costruendo il grafo di assegnazione delle risorse. Un ciclo all'interno del
grafo denota uno stallo. È concretamente irragionevole da implementare in
quanto molto complesso.</p>
<p>Lo si può applicare solo nei casi di una risorsa per tipologia.</p>
<p>Serve quindi una soluzione che funzioni in generale, ovvero anche nei casi in
cui si hanno più risorse per ogni tipologia. Siano dunque:</p>
<div class="arithmatex">\[
  E = \ipmatrix{E_1 &amp; E_2 &amp; \dots &amp; E_m}
  \qquad
  A = \ipmatrix{A_1 &amp; A_2 &amp; \dots &amp; A_m}
\]</div>
<div class="arithmatex">\[
  C = \begin{bmatrix}
        C_{11} &amp; C_{12} &amp; \dots  &amp; C_{1m} \\
        C_{21} &amp; C_{22} &amp; \dots  &amp; C_{2m} \\
        \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
        C_{n1} &amp; C_{n2} &amp; \dots  &amp; c_{nm}
      \end{bmatrix}
  \qquad
  R = \begin{bmatrix}
        R_{11} &amp; R_{12} &amp; \dots  &amp; R_{1m} \\
        R_{21} &amp; R_{22} &amp; \dots  &amp; R_{2m} \\
        \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
        R_{n1} &amp; R_{n2} &amp; \dots  &amp; R_{nm}
      \end{bmatrix}
\]</div>
<p>dove <span class="arithmatex">\(E\)</span> sono le risorse esistenti, <span class="arithmatex">\(A\)</span> sono le risorse disponibili, <span class="arithmatex">\(C\)</span>
è la matrice di allocazione corrente e <span class="arithmatex">\(R\)</span> è la matrice delle richieste.</p>
<p>Sia <span class="arithmatex">\(r_i\)</span> l'<span class="arithmatex">\(i\)</span>-esima riga della matrice <span class="arithmatex">\(R\)</span>. Dati due vettori
<span class="arithmatex">\(X = [\oneton[m]{x}]\)</span> e <span class="arithmatex">\(Y = [\oneton[m]{y}]\)</span>, si dice che:</p>
<div class="arithmatex">\[ X \leq Y \iff \forall i \in [1,\; m] \quad x_i \leq y_i \]</div>
<p>L'algoritmo di individuazione dello stallo opera nel seguente modo:</p>
<ol>
<li>inizialmente ogni processo <span class="arithmatex">\(P_i\)</span> non è marcato;</li>
<li>per ogni processo non marcato <span class="arithmatex">\(P_i \tc r_i \leq A\)</span> (si individuano i
   processi che possono ottenere le risorse necessarie alla loro terminazione):<ul>
<li><span class="arithmatex">\(A = A + C_i\)</span>;</li>
<li>marca <span class="arithmatex">\(P_i\)</span> (il processo può terminare la sua normale esecuzione:
  avviene il rilascio delle risorse).</li>
</ul>
</li>
<li>se rimangono processi non marcati:<ul>
<li>i processi non marcati sono in stallo (nessuno di loro può acquisire
  risorse sufficienti a terminare, tenendo occupate le risorse già prese).</li>
</ul>
</li>
</ol>
<div class="admonition example">
<p class="admonition-title">Rilevo dello stallo</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">1<sup>o</sup> esempio</label><label for="__tabbed_1_2">2<sup>o</sup> esempio</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Siano:</p>
<div class="arithmatex">\[ E = \ipmatrix{4 &amp; 2 &amp; 3 &amp; 1} \qquad A = \ipmatrix{2 &amp; 1 &amp; 0 &amp; 0} \]</div>
<div class="arithmatex">\[
  C = \begin{bmatrix}
        0 &amp; 0 &amp; 1 &amp; 0 \\
        2 &amp; 0 &amp; 0 &amp; 1 \\
        0 &amp; 1 &amp; 2 &amp; 0
      \end{bmatrix}
  \qquad
  R = \begin{bmatrix} 
        2 &amp; 0 &amp; 0 &amp; 1 \\
        1 &amp; 0 &amp; 1 &amp; 0 \\
        2 &amp; 1 &amp; 0 &amp; 0
      \end{bmatrix}
\]</div>
<p>In questo caso:</p>
<ol>
<li>viene marcato il processo <span class="arithmatex">\(P_1\)</span>;</li>
<li>viene marcato il processo <span class="arithmatex">\(P_2\)</span>;</li>
<li>viene marcato il processo <span class="arithmatex">\(P_3\)</span>.</li>
</ol>
<p>Pertanto i processi non sono in stallo.</p>
</div>
<div class="tabbed-block">
<p>Siano:</p>
<div class="arithmatex">\[ 
  E = \ipmatrix{2 &amp; 1 &amp; 1 &amp; 2 &amp; 1} 
  \qquad
  A = \ipmatrix{0 &amp; 0 &amp; 0 &amp; 0 &amp; 1} 
\]</div>
<div class="arithmatex">\[
  C = \begin{bmatrix}
        1 &amp; 0 &amp; 1 &amp; 1 &amp; 0 \\
        1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 
      \end{bmatrix}
  \qquad
  R = \begin{bmatrix}
        0 &amp; 1 &amp; 0 &amp; 0 &amp; 1 \\
        0 &amp; 0 &amp; 1 &amp; 0 &amp; 1 \\
        0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
        1 &amp; 0 &amp; 1 &amp; 0 &amp; 1
      \end{bmatrix}
\]</div>
<p>In questo caso:</p>
<ol>
<li>viene marcato il processo <span class="arithmatex">\(P_1\)</span></li>
</ol>
<div class="arithmatex">\[ 
  A = A + C_3 
    = \ipmatrix{0 &amp; 0 &amp; 0 &amp; 0 &amp; 1} + \ipmatrix{0 &amp; 0 &amp; 0 &amp; 1 &amp; 0}
    = \ipmatrix{0 &amp; 0 &amp; 0 &amp; 1 &amp; 1}
\]</div>
<p>Non vi sono altri indici, dunque processi, per i quali viene soddisfatto
<span class="arithmatex">\(r_i \leq A\)</span>. Pertanto i processi non marcati <span class="arithmatex">\(P_1\)</span>, <span class="arithmatex">\(P_2\)</span>, <span class="arithmatex">\(P_4\)</span>
sono in stallo.</p>
</div>
</div>
</div>
</div>
<p>Quando e quanto spesso invocare l'algoritmo dipende da:</p>
<ul>
<li>frequenza presunta con la quale si verifica lo stallo;</li>
<li>numero di processi coinvolti nello stallo.</li>
</ul>
<p>In generale uno stallo si verifica quando un processo avanza una richiesta che
non può essere soddisfatta immediatamente.</p>
<p><strong>Utilizzare l'algoritmo a ogni richiesta</strong>, consente la determinazione dello
stallo e del processo la cui richiesta ha cagionato lo stallo. Vi è un aumento
notevole del carico (overhead).</p>
<p><strong>Invocare l'algoritmo quando la percentuale di utilizzo delle risorse scende
al di sotto di una soglia.</strong></p>
<p><strong>Invocare l'algoritmo ad istanti arbitrari</strong>, nel grafo di assegnazione delle
risorse potrebbero esistere molti cicli e diventa difficile determinare quale
processo ha "causato" lo stallo.</p>
<h5 id="eliminarlo">Eliminarlo<a class="headerlink" href="#eliminarlo" title="Link permanente">⚓︎</a></h5>
<p>Si può operare secondo diverse modalità.</p>
<h6 id="terminazione-dei-processi">Terminazione dei processi<a class="headerlink" href="#terminazione-dei-processi" title="Link permanente">⚓︎</a></h6>
<p>Generalmente si effettua l'abort di tutti i processi coinvolti nello stallo.</p>
<p>In alternativa si può effettuare l'abort di un processo alla volta fino a quando
il ciclo non è eliminato. Dopo ogni abort si deve rieseguire l'algoritmo di
determinazione dello stallo. L'ordine con cui abortire i processi viene dato da
una funzione di minimo costo basata su:</p>
<ul>
<li>priorità dei processi;</li>
<li>tempo trascorso in esecuzione e necessario al completamento;</li>
<li>risorse già utilizzate e risorse richieste (processo in fase di stampa, etc);</li>
<li>tipo di processo (interattivo, ecc.).</li>
</ul>
<h6 id="prelazione-di-risorse">Prelazione di risorse<a class="headerlink" href="#prelazione-di-risorse" title="Link permanente">⚓︎</a></h6>
<p>Si seleziona un processo vittima che minimizzi i costi e viene effettuato il
rollback del processo a cui è stata sottratta la risorsa, ovvvero si effettua
un return a uno stato sicuro per poterlo riavviare in seguito. Per questo motivo
vi è un salvataggio periodico dello stato dei processi. In caso di stallo:</p>
<ul>
<li>si ripristina il processo all'ultimo stato salvato;</li>
<li>si fa ripartire il processo, il non-determinismo dei processi concorrenti
  dovrebbe garantire il non ri-verificarsi dello stallo.</li>
</ul>
<p>In generale conviene uccidere il processo</p>
<p>Si può andare incontro a starvation: alcuni processi potrebbero essere
selezionati costantemente come vittime, include number of rollback in cost
factor.</p>
<h4 id="evitarlo-con-politiche-di-allocazione">Evitarlo con politiche di allocazione<a class="headerlink" href="#evitarlo-con-politiche-di-allocazione" title="Link permanente">⚓︎</a></h4>
<p>La strategia di evitare lo stallo mediante politiche di allocazione prevede di
definire un ordine di assegnazione delle risorse tale che non si verifichi mai
uno stallo.</p>
<p>Un esempio grafico è il seguente:</p>
<p>TODO: aggiungere immagine.</p>
<p>Sugli assi sono riportate le istruzioni che devono essere eseguite,
sull'ascissa per il processo <span class="arithmatex">\(A\)</span> e sull'ordinata per il processo <span class="arithmatex">\(B\)</span>. Sono
presenti due risorse: printer e plotter, le quali sono usate dai processi nelle
istruzioni indicate con la freccia a punta doppia. Le aree sbarrate non sono
percorribili, in quanto si avrebbe la stessa risorsa assegnata a due processi</p>
<p>Qual è l'ordine giusto per evitare lo stallo?</p>
<p>Con ordine di esecuzione <span class="arithmatex">\(I_1 \to I_5\)</span> si arriva allo stallo, in quanto non
vi sono percorsi percorribili:</p>
<ul>
<li>printer è assegnato ad <span class="arithmatex">\(A\)</span>, plotter a <span class="arithmatex">\(B\)</span>;</li>
<li>per proseguire, <span class="arithmatex">\(A\)</span> necessita del plotter;</li>
<li>per proseguire, <span class="arithmatex">\(B\)</span> necessita del printer.</li>
</ul>
<p>Con ordine di esecuzione <span class="arithmatex">\(I_1\to I_2\to I_3\to I_4\to I_5\to I_6\to I_7\to I_8\)</span>
non si verifica stallo.</p>
<p>I vantaggi di questa politica è che non è necessario interrompere processi e
riportarli in uno stato precedente, il che era un problema presente nelle
strategie di rilevamento dello stallo.</p>
<p>Le restrizioni sono però le seguenti:</p>
<ul>
<li>il numero massimo di risorse necessitate da ogni processo deve essere noto a
  priori (prima dell'esecuzione);</li>
<li>i processi devono essere indipendenti: l'ordine di esecuzione non deve essere
  vincolato a esigenze di sincronizzazione;</li>
<li>deve esserci un numero fissato di risorse da allocare</li>
<li>quando un processo richiede risorse potrebbe essere posto in attesa</li>
<li>quando un processo ottiene tutte le risorse di cui necessita, deve rilasciarle
  in un tempo finito.</li>
</ul>
<h5 id="stato-sicuro-e-insicuro">Stato sicuro e insicuro<a class="headerlink" href="#stato-sicuro-e-insicuro" title="Link permanente">⚓︎</a></h5>
<p>Si possono pertanto definire due stati del sistema, rispetto alle risorse
assegnate:</p>
<ul>
<li>sicuro: esiste almeno una sequenza di esecuzione dei processi che ne consente
  la terminazione senza incorrere in una situazione di stallo;</li>
<li>insicuro.</li>
</ul>
<p>Lo stato sicuro garantisce l'impossibilità di verificarsi dello stallo. Quello
insicuro indica che vi è possibilità (non certezza) che si verifichi lo stallo.</p>
<p>La strategia di evitare lo stallo si basa sulla certezza che uno stato sicuro
non possa determinare uno stallo.</p>
<div class="admonition def">
<p class="admonition-title">Deadlock avoidance</p>
<p>Assicurarsi che il sistema non entri mai in uno stato non sicuro.</p>
</div>
<h5 id="algoritmo-del-banchiere">Algoritmo del banchiere<a class="headerlink" href="#algoritmo-del-banchiere" title="Link permanente">⚓︎</a></h5>
<p>La strategia di evitare lo stallo mediante politiche di allocazione vede la sua
applicazione pratica nell'algoritmo del banchiere. Questo assegna risorse al
processo solo se il sistema resta in uno stato sicuro: i processi procedono,
terminano e restituiscono le risorse al sistema.</p>
<p>Lo stato sicuro viene determinato utilizzando l'algoritmo di rilevazione dello
stallo. Tale strategia prende il nome dal comportamento del banchiere: nessun
banchiere presterebbe dei soldi senza avere certezze che questi tornino a sé.
Il principio è attuato utilizzando le risorse come se fossero il denaro.</p>
<p>Segue una bozza in C/pseudocodice dell'algoritmo del banchiere:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Strutture dati globali</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">state</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">resource</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">available</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">claim</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">];</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">alloc</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">];</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Algoritmo di allocazione risorse</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">alloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">request</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">claim</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">*</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span><span class="c1">// &lt;error&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">requests</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">available</span><span class="p">[</span><span class="o">*</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">  </span><span class="c1">// &lt;suspend-process&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">  </span><span class="c1">// &lt;define-new-state&gt;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">  </span><span class="n">alloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">request</span><span class="p">[</span><span class="o">*</span><span class="p">];</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="n">available</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">available</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">request</span><span class="p">[</span><span class="o">*</span><span class="p">];</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="p">}</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">safe</span><span class="p">(</span><span class="n">newstate</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">  </span><span class="c1">// &lt;carry-on-allocation&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">  </span><span class="c1">// &lt;restore-original-state&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">  </span><span class="c1">// &lt;suspend-process&gt;</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Algoritmo per test della sicurezza</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">boolean</span><span class="w"> </span><span class="nf">safe</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">currentavail</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">  </span><span class="n">process</span><span class="w"> </span><span class="n">rest</span><span class="p">[</span><span class="n">number_of_processes</span><span class="p">];</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">  </span><span class="n">currentavail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">available</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">all_processes</span><span class="p">};</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">  </span><span class="n">possible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">possible</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="c1">// find a process Pk in rest sush that</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="n">claim</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">alloc</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">currentavail</span><span class="p">;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// simulate execution of Pk</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">      </span><span class="n">currentavail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentavail</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">alloc</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="o">*</span><span class="p">];</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">      </span><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">{</span><span class="n">Pk</span><span class="p">};</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">      </span><span class="n">possible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">rest</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">null</span><span class="p">);</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="impedirlo-rimuovendone-le-condizioni">Impedirlo rimuovendone le condizioni<a class="headerlink" href="#impedirlo-rimuovendone-le-condizioni" title="Link permanente">⚓︎</a></h4>
<p>È possibile impedire il verificarsi dello stallo rimuovendo una delle quattro
condizioni. Si impongono pertanto dei vincoli sulla richiesta delle risorse.
Le classi di prevenzione sono:</p>
<ul>
<li>metodi indiretti: prevengono il verificarsi di una delle tre condizioni
  necessarie;</li>
<li>metodi diretti: prevengono il verificarsi dell'attesa circolare.</li>
</ul>
<h5 id="negare-la-mutua-esclusione">Negare la mutua esclusione<a class="headerlink" href="#negare-la-mutua-esclusione" title="Link permanente">⚓︎</a></h5>
<p>In questo caso, un processo non deve mai attendere una risorsa condivisibile,
devono essere possibili degli accessi multipli contemporanei alle risorse
condivise. Questa soluzione non è generalmente applicabile.</p>
<p>È applicabile in alcuni casi specifici: alcuni dispositivi (es. stampanti)
possono essere gestiti con <em>spool</em>:</p>
<ul>
<li>i processi scrivono l'output in un'area di spool;</li>
<li>solo il gestore della stampante richiede e usa la stampante;</li>
<li>quindi lo stallo per la stampante è eliminabile;</li>
</ul>
<p>Non tutti i dispositivi possono essere però gestiti con spool e vi può comunque
essere stallo nell'accesso all'area di spool.</p>
<p>Principio:</p>
<ul>
<li>evitare di assegnare una risorsa quando non strettamente necessario;</li>
<li>Far in modo che il minor numero possibile di processi possa richiedere una
  risorsa.</li>
</ul>
<h5 id="negare-lhold-and-wait">Negare l'hold and wait<a class="headerlink" href="#negare-lhold-and-wait" title="Link permanente">⚓︎</a></h5>
<p>In questo caso ogni processo deve richiedere all'inizio della sua esecuzione
tutte le risorse. I problemi sono i seguenti:</p>
<ul>
<li>il processo potrebbe non sapere di quali risorse avrà bisogno;</li>
<li>il processo entra in <em>Blocked</em> fino a quando tutte le richieste non vengono
  soddisfatte contemporaneamente.</li>
<li>vincola risorse che altri processi potrebbero utilizzare</li>
</ul>
<p>Questo approccio è inefficiente, poiché:</p>
<ul>
<li>prima di andare in run tutte le risorse devono essere disponibili, in realtà
  potrebbe procedere utilizzandone solo una parte;</li>
<li>le risorse assegnate al processo potrebbero rimanere inutilizzate per molto
  tempo, gli altri processi sono in attesa indefinita.</li>
</ul>
<h5 id="negare-lassenza-di-prerilascio">Negare l'assenza di prerilascio<a class="headerlink" href="#negare-lassenza-di-prerilascio" title="Link permanente">⚓︎</a></h5>
<p>In questo caso vi sono due possibilità:</p>
<ol>
<li>un processo che non riesce ad ottenere le risorse di cui necessita, rilascia
  quelle che detiene per richiederle nuovamente in un istante successivo;</li>
<li>il sistema operativo può richiedere il pre-rilascio delle risorse al processo
  che le detiene per assegnarle al richiedente.</li>
</ol>
<p>L'approccio è applicabile solo se lo stato della risorsa è facilmente salvabile
(CPU), non è applicabile nel caso di stampanti, etc.</p>
<h5 id="negare-lattesa-circolare">Negare l'attesa circolare<a class="headerlink" href="#negare-lattesa-circolare" title="Link permanente">⚓︎</a></h5>
<p>Si definisce un ordine lineare (di numerazione) per tutte le risorse, Se un
processo richiede una risorsa <span class="arithmatex">\(R\)</span>, successivamente potrà richiedere solo una
risorsa che nell'ordinamento segue <span class="arithmatex">\(R\)</span>.</p>
<div class="admonition example">
<p class="admonition-title">Esempio</p>
<p><span class="arithmatex">\(R_i\)</span> precede <span class="arithmatex">\(R_j\)</span> se <span class="arithmatex">\(i &lt; j\)</span>, un processo potrà chiedere le risorse
solo nell'ordine <span class="arithmatex">\(R_i\)</span>, <span class="arithmatex">\(R_j\)</span>.</p>
</div>
<p>Questo metodo può essere inefficiente.</p>
<h2 id="concorrenza">Concorrenza<a class="headerlink" href="#concorrenza" title="Link permanente">⚓︎</a></h2>
<p>Con multiprogrammazione si intende la gestione di più processi su un singolo
processore, mentre con multiprocessing si intende la gestione di più processi
su più processori. I processi distribuiti prendono il nome di <em>cluster</em>.</p>
<p>Vi è competizione tra i processi/threads per ottenere e condividere le risorse:
CPU, Memoria, Canali di I/O, Files, etc.</p>
<div class="admonition def">
<p class="admonition-title">Terminologia</p>
<dl>
<dt><code>Sessione critica</code></dt>
<dd>Porzione di codice all'interno di un processo/thread che richiede accesso
a risorse condivise.</dd>
<dt><code>Deadlock</code></dt>
<dd>Situazione nella quale due o più processi sono impossibilitati dal 
procedere poiché sono in attesa l'uno dell'altro.</dd>
<dt><code>Livelock</code></dt>
<dd>Situazione nella quale due o più processi cambiano continuamente il 
proprio stato a causa del cambiamento di stato degli altri, senza fare 
alcun lavoro utile.</dd>
<dt><code>Mutua esclusione</code></dt>
<dd>Requisito per il quale, quando un processo è nella propria sezione 
critica, nessun altro processo può essere nella propria sezione critica 
se questa fa riferimento a risorse condivise con il primo processo.</dd>
<dt><code>Race condition</code></dt>
<dd>Situazione nella quale thread o processi leggono e scrivono un dato 
condiviso e il risultato dipende dalla loro velocità reciproca.</dd>
<dt><code>Starvation</code></dt>
<dd>Situazione nella quale un processo non riceve mai l'utilizzo di una 
risorsa e viene costantemente scavalcato da altri processi.</dd>
</dl>
</div>
<p>I vantaggi della concorrenza sono i seguenti:</p>
<ul>
<li>benefici sull'esecuzione nonostante il sovraccarico dovuto dal context
  switching;</li>
<li>migliore utilizzo delle risorse.</li>
</ul>
<p>I problemi su singolo processore sono:</p>
<ul>
<li>condivisione pericolosa: ordine delle operazioni di lettura e scrittura su
  aree di memoria condivise;</li>
<li>difficoltà nell'assegnare le risorse ai processi in maniera ottimale;</li>
<li>difficoltà nella rilevazione degli errori nel codice e dei conflitti di
  interlacciamento.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kt">char</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">;</span><span class="w"> </span><span class="c1">// condivise</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">echo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">  </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">in</span><span class="p">);</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">  </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La procedura <code class="highlight"><span class="n">echo</span><span class="p">()</span></code> è condivisa, in questo modo c'è risparmio dello spazio
di memoria ma anche due processi concorrenti.</p>
<ul>
<li><span class="arithmatex">\(P_1\)</span> viene interrotto dopo la <code class="highlight"><span class="n">scanf</span><span class="p">()</span></code>;</li>
<li><span class="arithmatex">\(P_2\)</span> esegue tutto <code class="highlight"><span class="n">echo</span><span class="p">()</span></code>;</li>
<li><span class="arithmatex">\(P_1\)</span> viene riattivato da <code class="highlight"><span class="n">scanf</span><span class="p">()</span></code> in poi e ha perso il dato che aveva
  letto.</li>
</ul>
<p>La soluzione sta nell'avviare un solo processo alla volta (mutua esclusione).</p>
<p>I problemi in caso di SMP invece sono:</p>
<ul>
<li>stessi problemi di un calcolatore a singolo processore, una interruzione può
  fermare l'esecuzione di un processo in un qualsiasi istante;</li>
<li>interlacciamento esecuzione processi paralleli.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Processo <span class="arithmatex">\(P_1\)</span>, Processore 1</label><label for="__tabbed_2_2">Processo <span class="arithmatex">\(P_2\)</span>, Processore 2</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1">// ...</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">in</span><span class="p">);</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="c1">// ...</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="n">printf</span><span class="p">(</span><span class="s">&quot;&amp;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1">// ...  </span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="c1">// ...</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">in</span><span class="p">);</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="c1">// ...</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="n">printf</span><span class="p">(</span><span class="s">&quot;&amp;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Il carattere letto da <span class="arithmatex">\(P_1\)</span> è perso prima di poter essere stampato, questo è
dovuto alla perdita di aggiornamento. La soluzione è nuovamente la mutua
esclusione.</p>
<p>Un solo programma per volta può entrare nella propria sezione critica (es. un
solo programma per volta può inviare comandi alla stampante).</p>
<h2 id="mutua-esclusione">Mutua esclusione<a class="headerlink" href="#mutua-esclusione" title="Link permanente">⚓︎</a></h2>
<p>I meccanismi che provvedono alla mutua esclusione devono garantire i seguenti
requisiti:</p>
<ul>
<li>un solo processo alla volta deve accedere alla sezione (o risorsa) critica;</li>
<li>un processo fuori della sezione critica non deve interferire con il processo
  nella sezione critica;</li>
<li>ogni processo deve poter accedere dopo un tempo finito di attesa in coda alla
  risorsa critica (no stallo o starvation);</li>
<li>se nessun processo è nella sezione critica, un processo deve poter entrare
  nella sezione critica senza attese;</li>
<li>non ci devono essere supposizioni sulla velocità di esecuzione relativa dei
  processi;</li>
<li>il tempo di permanenza nella sezione critica è (de)finito.</li>
</ul>
<h3 id="approcci-software">Approcci software<a class="headerlink" href="#approcci-software" title="Link permanente">⚓︎</a></h3>
<p>I processi, senza ausilio del sistema operativo o del linguaggio di
programmazione, devono coordinarsi tra loro (Dekker). Questo porta ad un aumento
del tempo di esecuzione e a errori frequenti.</p>
<h4 id="algoritmo-di-dekker">Algoritmo di Dekker<a class="headerlink" href="#algoritmo-di-dekker" title="Link permanente">⚓︎</a></h4>
<h5 id="primo-tentativo">Primo tentativo<a class="headerlink" href="#primo-tentativo" title="Link permanente">⚓︎</a></h5>
<p><strong>Protocollo dell'Igloo</strong>: prima di entrare nella sezione critica, i processi
controllano uno alla volta una variabile turno. Questo provoca il <em>busy wait</em>
(attesa attiva) che consuma tempo utile di esecuzione.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Processo <span class="arithmatex">\(0\)</span></label><label for="__tabbed_3_2">Processo <span class="arithmatex">\(1\)</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v1</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span>
<span class="normal"><a href="#__codelineno-6-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">var</span><span class="w"> </span><span class="n">turno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0..1</span><span class="p">;</span><span class="w">  </span><span class="c1">// variabile globale condivisa</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="c1">// ...</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">turno</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">  </span><span class="n">nulla</span><span class="p">;</span><span class="w">  </span><span class="c1">// busy wait</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="p">}</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="n">turno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v1</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span>
<span class="normal"><a href="#__codelineno-7-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">var</span><span class="w"> </span><span class="n">turno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0..1</span><span class="p">;</span><span class="w">  </span><span class="c1">// variabile globale condivisa</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="c1">// ...</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">turno</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">  </span><span class="n">nulla</span><span class="p">;</span><span class="w">  </span><span class="c1">// busy wait</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="p">}</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="n">turno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Il <strong>pro</strong> è che garantisce la mutua esclusione. I <strong>punti deboli</strong> però sono i
seguenti:</p>
<ol>
<li>i processi devono osservare l'alternanza, il più lento determina la velocità
   di avanzamento di entrambi i processi;</li>
<li>se un processo fallisce nella propria sezione critica e non, l'altro processo
   rimarrà bloccato per sempre.</li>
</ol>
<h5 id="secondo-tentativo">Secondo tentativo<a class="headerlink" href="#secondo-tentativo" title="Link permanente">⚓︎</a></h5>
<p>Ogni processo ha un flag relativo all'utilizzo della risorsa e può leggere il
flag dell'altro senza modificarlo.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Processo <span class="arithmatex">\(0\)</span></label><label for="__tabbed_4_2">Processo <span class="arithmatex">\(1\)</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v2</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">boolean</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w">  </span><span class="c1">// variabile condivisa</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="c1">//  ...</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="n">nulla</span><span class="p">;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="p">}</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v2</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">boolean</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w">  </span><span class="c1">// variabile condivisa</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="c1">//  ...</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">  </span><span class="n">nulla</span><span class="p">;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="p">}</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Il <strong>pro</strong> è che sèun processo fallisce al di fuori della sua sezione critica,
l'altro può continuare a lavorare. I <strong>contro</strong> sono i seguenti:</p>
<ul>
<li>se un processo fallisce entro la sezione critica o prima di mettere <code class="highlight"><span class="nb">false</span></code>
  nel suo flag allora l'altro è bloccato per sempre;</li>
<li>se entrambi vedendo il flag dell'altro <code class="highlight"><span class="nb">false</span></code>, mettono il loro flag a
  <code class="highlight"><span class="nb">true</span></code>, entrambi vanno nella sezione critica, senza mutua esclusione.
  Vi è dipendenza della velocità dei processi.</li>
</ul>
<h5 id="terzo-tentativo">Terzo tentativo<a class="headerlink" href="#terzo-tentativo" title="Link permanente">⚓︎</a></h5>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Processo <span class="arithmatex">\(0\)</span></label><label for="__tabbed_5_2">Processo <span class="arithmatex">\(1\)</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v3</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">boolean</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="c1">// ...</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="c1">// la volontà di entrare in **sezione critica** viene</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="c1">// espressa prima della stessa</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">  </span><span class="n">nulla</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="p">}</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v3</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">boolean</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="c1">// ...</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="c1">// la volontà di entrare in **sezione critica** viene</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="c1">// espressa prima della stessa</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">  </span><span class="n">nulla</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="p">}</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Il <strong>pro</strong> è che la mutua esclusione è garantita. Vi sono però dei problemi:</p>
<ul>
<li>se un processo fallisce entro la sua sezione critica l'altro è bloccato;</li>
<li>se entrambi settano il flag a true prima che uno dei due verifichi la
  condizione del <code class="highlight"><span class="k">while</span></code> si ha stallo.</li>
</ul>
<h5 id="quarto-tentativo">Quarto tentativo<a class="headerlink" href="#quarto-tentativo" title="Link permanente">⚓︎</a></h5>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Processo <span class="arithmatex">\(0\)</span></label><label for="__tabbed_6_2">Processo <span class="arithmatex">\(1\)</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v4</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="c1">// ...</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">  </span><span class="n">pausa</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="p">}</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="c1">// sezione critica</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Dekker – v4</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="c1">// ...</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">  </span><span class="n">pausa</span><span class="p">;</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="p">}</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="c1">// sezione critica</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="c1">// ...</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Anche in questo caso la mutua esclusione viene garantita. I <strong>problemi</strong> sono i
seguenti:</p>
<ul>
<li>si può avere una situazione nella quale i due processi cambiano
  contemporaneamente le flag, generando attesa. In realtà non'è uno stallo
  poiché chi esce prima dal ciclo di attesa riesce ad entrare nella sezione
  critica;</li>
<li>se un processo fallisce entro la sua sezione critica l'altro è bloccato.</li>
</ul>
<h5 id="soluzione-corretta">Soluzione corretta<a class="headerlink" href="#soluzione-corretta" title="Link permanente">⚓︎</a></h5>
<p>Ogni processo ha una propria variabile <code class="highlight"><span class="n">flag</span></code> che indica se vuole andare
nella sezione critica o meno. La variabile <code class="highlight"><span class="n">turno</span></code> specifica chi ha il
diritto di insistere nel tentativo di entrare nella propria sezione critica.</p>
<p>Es.:
P0 vuole entrare (pone il suo flag a true)
P0 controlla il flag di P1
se falso entra nella sezione critica
se vero controlla il turno
se turno è 0 (il suo) continua a controllare periodicamente il flag di P1
se turno è 1 pone il suo flag a falso lasciando il passo a P1</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">ALGORITMO DI DEKKER</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span>
<span class="normal"><a href="#__codelineno-14-18">18</a></span>
<span class="normal"><a href="#__codelineno-14-19">19</a></span>
<span class="normal"><a href="#__codelineno-14-20">20</a></span>
<span class="normal"><a href="#__codelineno-14-21">21</a></span>
<span class="normal"><a href="#__codelineno-14-22">22</a></span>
<span class="normal"><a href="#__codelineno-14-23">23</a></span>
<span class="normal"><a href="#__codelineno-14-24">24</a></span>
<span class="normal"><a href="#__codelineno-14-25">25</a></span>
<span class="normal"><a href="#__codelineno-14-26">26</a></span>
<span class="normal"><a href="#__codelineno-14-27">27</a></span>
<span class="normal"><a href="#__codelineno-14-28">28</a></span>
<span class="normal"><a href="#__codelineno-14-29">29</a></span>
<span class="normal"><a href="#__codelineno-14-30">30</a></span>
<span class="normal"><a href="#__codelineno-14-31">31</a></span>
<span class="normal"><a href="#__codelineno-14-32">32</a></span>
<span class="normal"><a href="#__codelineno-14-33">33</a></span>
<span class="normal"><a href="#__codelineno-14-34">34</a></span>
<span class="normal"><a href="#__codelineno-14-35">35</a></span>
<span class="normal"><a href="#__codelineno-14-36">36</a></span>
<span class="normal"><a href="#__codelineno-14-37">37</a></span>
<span class="normal"><a href="#__codelineno-14-38">38</a></span>
<span class="normal"><a href="#__codelineno-14-39">39</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="n">boolean</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">turno</span><span class="p">;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">  </span><span class="n">turno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">  </span><span class="c1">// turno = 0;</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">  </span><span class="n">processo</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">  </span><span class="n">processo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="p">}</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="kt">void</span><span class="w"> </span><span class="nf">processo</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-14-21" name="__codelineno-14-21"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-14-26" name="__codelineno-14-26"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-14-27" name="__codelineno-14-27"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-28" name="__codelineno-14-28"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">turno</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-29" name="__codelineno-14-29"></a><span class="w">      </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-14-30" name="__codelineno-14-30"></a><span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">turno</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-31" name="__codelineno-14-31"></a><span class="w">        </span><span class="n">nulla</span><span class="p">;</span><span class="w"> </span><span class="c1">// ATTESA ATTIVA</span>
<a id="__codelineno-14-32" name="__codelineno-14-32"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-14-33" name="__codelineno-14-33"></a><span class="w">      </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-14-34" name="__codelineno-14-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-35" name="__codelineno-14-35"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-14-36" name="__codelineno-14-36"></a><span class="w">  </span><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-14-37" name="__codelineno-14-37"></a><span class="w">  </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-14-38" name="__codelineno-14-38"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-14-39" name="__codelineno-14-39"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>L'algoritmo è complesso e genera <em>attesa attiva</em>: un processo controlla
continuamente il flag dell'altro processo se pari a <code class="highlight"><span class="nb">true</span></code>.</p>
<p>Se un processo fallisce nella propria sezione critica l'altro processo rimane
bloccato.</p>
<h3 id="supporti-hardware">Supporti hardware<a class="headerlink" href="#supporti-hardware" title="Link permanente">⚓︎</a></h3>
<p>L'utilizzo di particolari <strong>istruzioni macchina</strong> permette una riduzione del
sovraccarico, nonostante non sia una soluzione del tutto soddisfacente.</p>
<h4 id="macchine-monoprocessore">Macchine monoprocessore<a class="headerlink" href="#macchine-monoprocessore" title="Link permanente">⚓︎</a></h4>
<p>I processi si alternano in esecuzione e la mutua esclusione si ottiene evitando
l'interruzione di un processo attivando e disattivando gli interrupt, è proprio
qui che è presente il supporto hardware.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Supporto hardware</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c1">// &lt;disattiva-le-interruzioni&gt;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="c1">// &lt;attiva-le-interruzioni&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Il <strong>pro</strong> è che la mutua esclusione viene garantita, però:</p>
<ul>
<li>l'efficienza peggiora poiché il processore non può alternare i processi
  liberamente;</li>
<li>non funziona su macchine SMP.</li>
</ul>
<h4 id="soluzioni-su-smp">Soluzioni su SMP<a class="headerlink" href="#soluzioni-su-smp" title="Link permanente">⚓︎</a></h4>
<p>Su SMP sono presenti delle istruzioni macchina speciali per l'accesso a
locazioni di memoria in modo atomico (non interrompibile), queste sono
<code class="highlight"><span class="n">TestAndSet</span><span class="p">()</span></code> e <code class="highlight"><span class="n">Swap</span><span class="p">()</span></code></p>
<p>L'accesso sequenziale ad una locazione di memoria è garantita dall'hardware.
Se si eseguono due test-and-set (o swap) contemporaneamente, le funzioni
vengono serializzate.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">TEST AND SET</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">boolean</span><span class="w"> </span><span class="nf">TestAndSet</span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="n">boolean</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="o">*</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Come si utilizza la funzione <code class="highlight"><span class="n">TestAndSet</span><span class="p">()</span></code>? Sia <code class="highlight"><span class="n">boolean</span><span class="w"> </span><span class="n">lock</span></code> una
variabile booleana condivisa inizializzata a <code class="highlight"><span class="nb">false</span></code> (la risorsa è libera).</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span>
<span class="normal"><a href="#__codelineno-17-7">7</a></span>
<span class="normal"><a href="#__codelineno-17-8">8</a></span>
<span class="normal"><a href="#__codelineno-17-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="n">boolean</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">TestAndSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">))</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="n">nulla</span><span class="p">;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">  </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// rilascio</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Lo swap permette di scambiare due variabili.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">SWAP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Swap</span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">  </span><span class="n">boolean</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">;</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">  </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">  </span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="o">:</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Come si usa <code class="highlight"><span class="n">Swap</span><span class="p">()</span></code> per garantire la mutua esclusione? Sia <code class="highlight"><span class="n">boolean</span><span class="w"> </span><span class="n">lock</span></code>
una variabile booleana condivisa inizializzata a <code class="highlight"><span class="nb">false</span></code> (ovvero la risorsa
è accessibile).</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">boolean</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">    </span><span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">key</span><span class="p">);</span><span class="w"> </span><span class="c1">// key torna `false`</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">  </span><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">  </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Anche i supporti hardware hanno i loro vantaggi e svantaggi</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Vantaggi</label><label for="__tabbed_7_2">Svantaggi</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>si può applicare a un qualsiasi numero di processi anche su 
  multiprocessori a memoria condivisa;</li>
<li>si può usare per gestire più di una sezione critica, ciascuna con una
propria variabile;</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>attesa attiva, poiché i processi consumano tempo di CPU</li>
<li>starvation, poiché la scelta di quale processo andrà nella sezione 
  critica è arbitraria;</li>
<li>stallo.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Esempio di stallo su singolo processore</p>
<p>Siano <span class="arithmatex">\(p_0\)</span> e <span class="arithmatex">\(p_1\)</span> due processi, con <span class="arithmatex">\(p_0\)</span> a priorità più alta
di <span class="arithmatex">\(p_1\)</span>. </p>
<p>Se <span class="arithmatex">\(p_0\)</span> è in sezione critica, <span class="arithmatex">\(p_1\)</span> tenterà di accedere (o tramite
<code class="highlight"><span class="n">TestAndSet</span><span class="p">()</span></code> o <code class="highlight"><span class="n">Swap</span><span class="p">()</span></code>) alla risorsa bloccata da <span class="arithmatex">\(p_0\)</span> e 
nella sua attesa attiva non lascerà mai il posto a <span class="arithmatex">\(p_0\)</span> che ha
priorità più bassa.</p>
</div>
</div>
</div>
</div>
<h3 id="supporto-del-sistema-operativo-o-del-linguaggio-di-programmazione">Supporto del sistema operativo o del linguaggio di programmazione<a class="headerlink" href="#supporto-del-sistema-operativo-o-del-linguaggio-di-programmazione" title="Link permanente">⚓︎</a></h3>
<p>Le soluzioni offerte dal sistema operativo e dai linguaggi di programmazione
sono:</p>
<ul>
<li>scambio messaggi (Inter ProcessCommunication);</li>
<li>semafori;</li>
<li>monitor.</li>
</ul>
<p>Il semaforo può essere binario, ovvero che gestisce una sola risorsa o contatore,
che gestisce un lotto di risorse dello stesso tipo.</p>
<h4 id="semafori">Semafori<a class="headerlink" href="#semafori" title="Link permanente">⚓︎</a></h4>
<p>Il semaforo utilizza una variabile booleana o intera su cui sono possibili tre
operazioni:</p>
<ul>
<li>inizializzazione ad un valore non negativo;</li>
<li>operazione atomica <code class="highlight"><span class="n">wait</span><span class="p">()</span></code> che decrementa il valore della variabile. Se
  il valore della variabile diventa negativa, il processo che ha eseguito la
  <code class="highlight"><span class="n">wait</span><span class="p">()</span></code> viene bloccato;</li>
<li>operazione atomica <code class="highlight"><span class="n">signal</span><span class="p">()</span></code>che incrementa il valore della variabile. Se
  il valore della variabile era negativo, uno dei processi bloccati
  sull'operazione di <code class="highlight"><span class="n">wait</span><span class="p">()</span></code> viene sbloccato.</li>
</ul>
<h5 id="implementazione">Implementazione<a class="headerlink" href="#implementazione" title="Link permanente">⚓︎</a></h5>
<ol>
<li>si associa un semaforo ad ogni risorsa condivisa;</li>
<li>il processo che vuole utilizzare la risorsa effettua una operazione di
   <code class="highlight"><span class="n">wait</span><span class="p">()</span></code>;</li>
<li>il processo che rilascia la risorsa effettua il <code class="highlight"><span class="n">signal</span><span class="p">()</span></code>;</li>
<li>la variabile numerica indica il numero di istanze di una specifica risorsa
   condivisa (semaforo contatore);</li>
<li>se la variabile è negativa, essa rappresenta (presa in valore assoluto) il
   numero di processi in attesa.</li>
</ol>
<p>Le funzioni <code class="highlight"><span class="n">wait</span><span class="p">()</span></code> e <code class="highlight"><span class="n">signal</span><span class="p">()</span></code> nel semaforo binario impostano il
valore del semaforo rispettivamente a <code class="highlight"><span class="nb">false</span></code> e <code class="highlight"><span class="nb">true</span></code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="n">wait</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="c1">// !!sezione-critica!!</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="n">signal</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">SEMAFORO CONTATORE</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">istanze</span><span class="p">;</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">processo</span><span class="w"> </span><span class="o">*</span><span class="n">P</span><span class="p">;</span><span class="w"> </span><span class="c1">// lista dei processi in coda</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="p">}</span><span class="w"> </span><span class="n">semaforo</span><span class="p">;</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="kt">void</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="n">semaforo</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">  </span><span class="n">s</span><span class="p">.</span><span class="n">istanze</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">istanze</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="w">    </span><span class="c1">// &lt;poni-processo-in-coda&gt;</span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">    </span><span class="c1">// &lt;blocca-questo-processo&gt;  *Running*--&gt;*Blocked*</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="p">}</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="kt">void</span><span class="w"> </span><span class="nf">signal</span><span class="p">(</span><span class="n">semaforo</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">  </span><span class="n">s</span><span class="p">.</span><span class="n">istanze</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">istanze</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="w">    </span><span class="c1">// &lt;rimuovi-un-processo-in-coda&gt;</span>
<a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="w">    </span><span class="c1">// &lt;sveglia-il-processo&gt;  *Blocked*--&gt;*Ready*</span>
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">SEMAFORO BINARIO</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span>
<span class="normal"><a href="#__codelineno-22-20">20</a></span>
<span class="normal"><a href="#__codelineno-22-21">21</a></span>
<span class="normal"><a href="#__codelineno-22-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">  </span><span class="n">boolean</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">processo</span><span class="w"> </span><span class="o">*</span><span class="n">P</span><span class="p">;</span><span class="w"> </span><span class="c1">// lista dei processi in coda</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="p">}</span><span class="w"> </span><span class="n">semaforo_bin</span><span class="p">;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="kt">void</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="n">semaforo_bin</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">val</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">    </span><span class="c1">// &lt;poni-processo-in-coda-a-P&gt;</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">    </span><span class="c1">// &lt;blocca-questo-processo&gt;: *Running*--&gt;*Blocked*</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="p">}</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="kt">void</span><span class="w"> </span><span class="nf">signal</span><span class="p">(</span><span class="n">semaforo_bin</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">P</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="c1">// coda vuota</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a><span class="w">    </span><span class="c1">// &lt;rimuovi-un processo-in-coda&gt;</span>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="w">    </span><span class="c1">// &lt;sveglia-il-processo&gt;: *Blocked*--&gt;*Ready*</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Il semaforo binario è un semaforo il cui valore intero può essere solo <code class="highlight"><span class="mi">0</span></code>
o <code class="highlight"><span class="mi">1</span></code>. La gestione è più complessa che non con semafori contatore.</p>
<p>Come fare affinché le operazioni <code class="highlight"><span class="n">signal</span><span class="p">()</span></code> e <code class="highlight"><span class="n">wait</span><span class="p">()</span></code> siano atomiche?</p>
<ol>
<li><strong>implementarle in hardware o firmware</strong>;</li>
<li>Dekker o Peterson, si genera però sovraccarico di elaborazione;</li>
<li>utilizzo dell'istruzione atomica <code class="highlight"><span class="n">TestAndSet</span><span class="p">()</span></code>;</li>
<li>se il sistema è monoprocessore basta disabilitare gli interrupt durante le
   operazioni;</li>
</ol>
<p>I semafori non presentano attesa attiva in quanto i processi in coda vengono
bloccati. Se un processo fallisce nella sezione critica, il semaforo si occupa
di dare comunque il signal della risorsa.</p>
<h4 id="deadlock-e-starvation">Deadlock e starvation<a class="headerlink" href="#deadlock-e-starvation" title="Link permanente">⚓︎</a></h4>
<p>Siano <span class="arithmatex">\(S\)</span> e <span class="arithmatex">\(Q\)</span> due semafori inizializzati a <span class="arithmatex">\(1\)</span>, si avrà:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Processo <span class="arithmatex">\(0\)</span></label><label for="__tabbed_8_2">Processo <span class="arithmatex">\(1\)</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="n">wait</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="n">wait</span><span class="p">(</span><span class="n">Q</span><span class="p">);</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="c1">// ...</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="n">signal</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="n">signal</span><span class="p">(</span><span class="n">Q</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">wait</span><span class="p">(</span><span class="n">Q</span><span class="p">);</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="n">wait</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="c1">// ...</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="n">signal</span><span class="p">(</span><span class="n">Q</span><span class="p">);</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="n">signal</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Il processo <span class="arithmatex">\(p_1\)</span> non rilascia <span class="arithmatex">\(Q\)</span> fin quando non ottiene <span class="arithmatex">\(S\)</span>, <span class="arithmatex">\(p_0\)</span>
invece non rilascia <span class="arithmatex">\(S\)</span> fino a quando non ottiene <span class="arithmatex">\(Q\)</span>. Le operazioni di
<code class="highlight"><span class="n">signal</span><span class="p">()</span></code> non verranno eseguite e si va in stallo.</p>
<h5 id="produttore-e-consumatore">Produttore e consumatore<a class="headerlink" href="#produttore-e-consumatore" title="Link permanente">⚓︎</a></h5>
<p>Tipica rappresentazione dei processi concorrenti:</p>
<ul>
<li>uno o più produttori generano dati inserendoli in un buffer</li>
<li>un consumatore preleva i dati uno alla volta</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Produttore</label><label for="__tabbed_9_2">Consumatore</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span>
<span class="normal"><a href="#__codelineno-25-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="cm">/* &lt;produce-dato&gt; */</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">  </span><span class="n">buffer</span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dato</span><span class="p">;</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">  </span><span class="n">in</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span>
<span class="normal"><a href="#__codelineno-26-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">out</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">  </span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">out</span><span class="p">];</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">  </span><span class="n">out</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">  </span><span class="c1">// &lt;consuma-w&gt;</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Vi è l'ipotesi che il buffer sia infinito: l'accesso al buffer tra produttore
e consumatore deve essere mutuamente esclusivo</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Produttore e Consumatore (semafori binari)</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span>
<span class="normal"><a href="#__codelineno-27-20">20</a></span>
<span class="normal"><a href="#__codelineno-27-21">21</a></span>
<span class="normal"><a href="#__codelineno-27-22">22</a></span>
<span class="normal"><a href="#__codelineno-27-23">23</a></span>
<span class="normal"><a href="#__codelineno-27-24">24</a></span>
<span class="normal"><a href="#__codelineno-27-25">25</a></span>
<span class="normal"><a href="#__codelineno-27-26">26</a></span>
<span class="normal"><a href="#__codelineno-27-27">27</a></span>
<span class="normal"><a href="#__codelineno-27-28">28</a></span>
<span class="normal"><a href="#__codelineno-27-29">29</a></span>
<span class="normal"><a href="#__codelineno-27-30">30</a></span>
<span class="normal"><a href="#__codelineno-27-31">31</a></span>
<span class="normal"><a href="#__codelineno-27-32">32</a></span>
<span class="normal"><a href="#__codelineno-27-33">33</a></span>
<span class="normal"><a href="#__codelineno-27-34">34</a></span>
<span class="normal"><a href="#__codelineno-27-35">35</a></span>
<span class="normal"><a href="#__codelineno-27-36">36</a></span>
<span class="normal"><a href="#__codelineno-27-37">37</a></span>
<span class="normal"><a href="#__codelineno-27-38">38</a></span>
<span class="normal"><a href="#__codelineno-27-39">39</a></span>
<span class="normal"><a href="#__codelineno-27-40">40</a></span>
<span class="normal"><a href="#__codelineno-27-41">41</a></span>
<span class="normal"><a href="#__codelineno-27-42">42</a></span>
<span class="normal"><a href="#__codelineno-27-43">43</a></span>
<span class="normal"><a href="#__codelineno-27-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w">                      </span><span class="c1">// numero di elementi nel buffer</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="n">binary_semaphore</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">     </span><span class="c1">// gestisce l&#39;accesso al buffer</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="n">bynary_semaphore</span><span class="w"> </span><span class="n">delay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// gestisce il caso di nessun elemento nel buffer</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">producer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">    </span><span class="n">produce</span><span class="p">();</span>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">    </span><span class="n">semWaitB</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="w">    </span><span class="c1">// Essendo il buffer infinito, il produttore può inserire tutto</span>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="w">    </span><span class="c1">// quello che produce</span>
<a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="w">    </span><span class="n">append</span><span class="p">();</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="w">    </span><span class="n">n</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">    </span><span class="c1">// Se n == 1, significa che il buffer prima era vuoto ed occorre</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">    </span><span class="c1">// avvisare il consumator</span>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="w">      </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">delay</span><span class="p">);</span>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="w">    </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-27-19" name="__codelineno-27-19"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="p">}</span>
<a id="__codelineno-27-21" name="__codelineno-27-21"></a>
<a id="__codelineno-27-22" name="__codelineno-27-22"></a><span class="kt">void</span><span class="w"> </span><span class="nf">consumer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-23" name="__codelineno-27-23"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">m</span><span class="p">;</span><span class="w"> </span><span class="c1">// variabile locale</span>
<a id="__codelineno-27-24" name="__codelineno-27-24"></a><span class="w">  </span><span class="c1">// Si pone in attesa che il primo elemento</span>
<a id="__codelineno-27-25" name="__codelineno-27-25"></a><span class="w">  </span><span class="c1">// venga prodotto</span>
<a id="__codelineno-27-26" name="__codelineno-27-26"></a><span class="w">  </span><span class="n">semWaitB</span><span class="p">(</span><span class="n">delay</span><span class="p">);</span>
<a id="__codelineno-27-27" name="__codelineno-27-27"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-28" name="__codelineno-27-28"></a><span class="w">    </span><span class="n">semWaitB</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>
<a id="__codelineno-27-29" name="__codelineno-27-29"></a><span class="w">    </span><span class="n">take</span><span class="p">();</span>
<a id="__codelineno-27-30" name="__codelineno-27-30"></a><span class="w">    </span><span class="n">n</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-27-31" name="__codelineno-27-31"></a><span class="w">    </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-27-32" name="__codelineno-27-32"></a><span class="w">    </span><span class="n">consume</span><span class="p">();</span>
<a id="__codelineno-27-33" name="__codelineno-27-33"></a><span class="w">    </span><span class="c1">// Se il consumatore ha svuotato il buffer, si mette in attesa</span>
<a id="__codelineno-27-34" name="__codelineno-27-34"></a><span class="w">    </span><span class="c1">// che venga prodotto un nuovo elemento</span>
<a id="__codelineno-27-35" name="__codelineno-27-35"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-36" name="__codelineno-27-36"></a><span class="w">      </span><span class="n">semWaitB</span><span class="p">(</span><span class="n">delay</span><span class="p">);</span>
<a id="__codelineno-27-37" name="__codelineno-27-37"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-38" name="__codelineno-27-38"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-27-39" name="__codelineno-27-39"></a><span class="p">}</span>
<a id="__codelineno-27-40" name="__codelineno-27-40"></a>
<a id="__codelineno-27-41" name="__codelineno-27-41"></a><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-42" name="__codelineno-27-42"></a><span class="w">  </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-27-43" name="__codelineno-27-43"></a><span class="w">  </span><span class="n">parbegin</span><span class="p">(</span><span class="n">producer</span><span class="p">,</span><span class="w"> </span><span class="n">consumer</span><span class="p">);</span>
<a id="__codelineno-27-44" name="__codelineno-27-44"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Produttore e Consumatore (semafori contatore)</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span>
<span class="normal"><a href="#__codelineno-28-21">21</a></span>
<span class="normal"><a href="#__codelineno-28-22">22</a></span>
<span class="normal"><a href="#__codelineno-28-23">23</a></span>
<span class="normal"><a href="#__codelineno-28-24">24</a></span>
<span class="normal"><a href="#__codelineno-28-25">25</a></span>
<span class="normal"><a href="#__codelineno-28-26">26</a></span>
<span class="normal"><a href="#__codelineno-28-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="n">semaphore</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="n">semaphore</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">producer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">    </span><span class="n">produce</span><span class="p">();</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="w">    </span><span class="n">semWaitB</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">    </span><span class="n">append</span><span class="p">();</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">    </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w"> </span><span class="c1">// Il loro ordine di chiamata</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="w">    </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"> </span><span class="c1">// è indifferente</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="p">}</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="kt">void</span><span class="w"> </span><span class="nf">consumer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">    </span><span class="c1">// Qui l&#39;ordine è invece importante. Il consumatore entrerebbe in</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="w">    </span><span class="c1">// sezione critica quando il buffer è vuoto e nessun produttore</span>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="w">    </span><span class="c1">// potrebbe aggiungere elementi: STALLO</span>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="w">    </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<a id="__codelineno-28-20" name="__codelineno-28-20"></a><span class="w">    </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-28-21" name="__codelineno-28-21"></a><span class="w">    </span><span class="n">take</span><span class="p">();</span>
<a id="__codelineno-28-22" name="__codelineno-28-22"></a><span class="w">    </span><span class="n">semSignalB</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-28-23" name="__codelineno-28-23"></a><span class="w">    </span><span class="n">consume</span><span class="p">();</span>
<a id="__codelineno-28-24" name="__codelineno-28-24"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-25" name="__codelineno-28-25"></a><span class="p">}</span>
<a id="__codelineno-28-26" name="__codelineno-28-26"></a>
<a id="__codelineno-28-27" name="__codelineno-28-27"></a><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">parbegin</span><span class="p">(</span><span class="n">producer</span><span class="p">,</span><span class="w"> </span><span class="n">consumer</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="monitor">Monitor<a class="headerlink" href="#monitor" title="Link permanente">⚓︎</a></h4>
<p>I semafori sono primitive potenti per gestire la mutua esclusione, ma la
scrittura di un programma con l'utilizzo dei semafori può essere tutt'altro che
semplice. Per questo esistono i monitor, che sono un costrutto di
sincronizzazione di alto livello.</p>
<p>È un modulo software le cui caratteristiche principali sono:</p>
<ul>
<li>variabili locali accessibili solo dalle procedure (metodi) definite al suo
  interno e non da procedure esterne;</li>
<li>un processo entra nel monitor chiamando le sue procedure</li>
<li>un solo processo alla volta può essere in esecuzione all'interno del monitor.
  Gli altri processi sono sospesi nell'attesa che il monitor diventi disponibile</li>
</ul>
<p>Vengono utilizzati per garantire la mutua esclusione e per la protezione delle
strutture dati condivise.</p>
<p>La sincronizzazione avviene tramite dell variabili di condizione. Su tali
variabili si opera mediante due funzioni:</p>
<ul>
<li><code>cwait(c)</code>, che sospende l'esecuzione del processo chiamante sulla
  condizione <code class="highlight"><span class="n">c</span></code>;</li>
<li><code class="highlight"><span class="n">csignal</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></code>, che riattiva un processo sospeso sulla condizione <code>c</code>.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Nota Bene</p>
<p>Se non c'è nessun processo in attesa su tale condizione il segnale viene
perso.</p>
</div>
<p>﻿*[ASCII]: American Standard Code for Information Interchange</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Ultimo aggiornamento:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 12, 2023</span>
      
        <br>
        Creata:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 12, 2023</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Torna su
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Piede" >
        
          
          <a href="SO2_thread_smp_microkernel.html" class="md-footer__link md-footer__link--prev" aria-label="Precedente: Thread, SMP e Microkernel" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Precedente
              </span>
              <div class="md-ellipsis">
                Thread, SMP e Microkernel
              </div>
            </div>
          </a>
        
        
          
          <a href="SO4_gestione_memoria.html" class="md-footer__link md-footer__link--next" aria-label="Prossimo: Gestione della memoria centrale" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Prossimo
              </span>
              <div class="md-ellipsis">
                Gestione della memoria centrale
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2023 Simone Fidanza – CC-BY-4.0
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:<fsimone2002@proton.me>" target="_blank" rel="noopener" title="Mandami una mail" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/sRavioli" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/who.dat.boy___" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "toc.follow", "navigation.top", "navigation.footer", "search.suggest", "search.share", "header.autohide", "content.action.edit", "content.action.view", "content.code.copy"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copiato", "clipboard.copy": "Copia", "search.result.more.one": "1 altro in questa pagina", "search.result.more.other": "# altri in questa pagina", "search.result.none": "Nessun documento trovato", "search.result.one": "1 documento trovato", "search.result.other": "# documenti trovati", "search.result.placeholder": "Scrivi per iniziare a cercare", "search.result.term.missing": "Non presente", "select.version": "Seleziona la versione"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../../javascripts/mathjax.js"></script>
        
      
        
          <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        
      
        
          <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>